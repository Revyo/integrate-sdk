---
title: Options
description: Complete API reference for the Integrate SDK
---

## createMCPClient

Creates a new MCP client instance.

```typescript
function createMCPClient(config: MCPClientConfig): MCPClient;
```

### Parameters

<AutoTypeTable path="../src/config/types.ts" name="MCPClientConfig" />

### Returns

An `MCPClient` instance.

### Example

```typescript
const client = createMCPClient({
  integrations: [
    githubIntegration({
      clientId: process.env.GITHUB_CLIENT_ID!,
      clientSecret: process.env.GITHUB_CLIENT_SECRET!,
    }),
  ],
  timeout: 60000,
  headers: {
    "User-Agent": "my-app/1.0.0",
  },
  clientInfo: {
    name: "my-app",
    version: "1.0.0",
  },
});
```

## MCPClient

The main client class for interacting with the MCP server.

### connect()

Establishes connection to the MCP server.

```typescript
async connect(): Promise<void>
```

**Example:**

```typescript
await client.connect();
```

### disconnect()

Closes the connection to the MCP server.

```typescript
async disconnect(): Promise<void>
```

**Example:**

```typescript
await client.disconnect();
```

### Typed Integration Methods

Built-in integrations (GitHub, Gmail) provide fully typed methods for calling tools.

**GitHub Integration Methods:**

```typescript
client.github.createIssue(params);
client.github.listIssues(params);
client.github.getRepo(params);
client.github.createPullRequest(params);
// ... and more
```

**Gmail Integration Methods:**

```typescript
client.gmail.sendEmail(params);
client.gmail.listEmails(params);
client.gmail.searchEmails(params);
client.gmail.createLabel(params);
// ... and more
```

**Server Methods:**

```typescript
client.server.listToolsByIntegration(params);
// ... other server-level tools
```

**Example:**

```typescript
// Fully typed with IntelliSense support
const result = await client.github.createIssue({
  owner: "owner",
  repo: "repo",
  title: "Bug report",
  body: "Description",
});
```

### \_callToolByName()

For integrations configured with `genericOAuthIntegration` or `createSimpleIntegration`, use this internal method to call tools directly.

```typescript
async _callToolByName(name: string, args?: Record<string, any>): Promise<MCPToolCallResponse>
```

**Parameters:**

- `name` - Full tool name (e.g., 'slack_send_message')
- `args` - Tool arguments as key-value pairs (optional)

**Returns:**

- `MCPToolCallResponse` - Tool execution result

**Example:**

```typescript
const result = await client._callToolByName("slack_send_message", {
  channel: "#general",
  text: "Hello!",
});
```

### getTool()

Gets a specific tool definition.

```typescript
getTool(name: string): MCPTool | undefined
```

**Parameters:**

- `name` - Tool name

**Returns:**

- `MCPTool` or `undefined` if not found

**Example:**

```typescript
const tool = client.getTool("github_create_issue");
console.log(tool?.inputSchema);
```

### getEnabledTools()

Gets all enabled tools (filtered by integrations).

```typescript
getEnabledTools(): MCPTool[]
```

**Returns:**

- Array of `MCPTool` objects

**Example:**

```typescript
const tools = client.getEnabledTools();
console.log(
  "Enabled tools:",
  tools.map((t) => t.name)
);
```

### getAvailableTools()

Gets all available tools from the server (unfiltered).

```typescript
getAvailableTools(): MCPTool[]
```

**Returns:**

- Array of `MCPTool` objects

**Example:**

```typescript
const tools = client.getAvailableTools();
console.log(
  "All tools:",
  tools.map((t) => t.name)
);
```

### getOAuthConfig()

Gets OAuth configuration for a specific integration.

```typescript
getOAuthConfig(integrationId: string): OAuthConfig | undefined
```

**Parameters:**

- `integrationId` - Integration identifier

**Returns:**

- `OAuthConfig` or `undefined` if not found

**Example:**

```typescript
const config = client.getOAuthConfig("github");
console.log("Scopes:", config?.scopes);
```

### getAllOAuthConfigs()

Gets all OAuth configurations.

```typescript
getAllOAuthConfigs(): Map<string, OAuthConfig>
```

**Returns:**

- Map of integration IDs to OAuth configurations

**Example:**

```typescript
const configs = client.getAllOAuthConfigs();
for (const [integrationId, config] of configs) {
  console.log(`${integrationId}: ${config.provider}`);
}
```

### onMessage()

Registers a message handler.

```typescript
onMessage(handler: (message: any) => void): () => void
```

**Parameters:**

- `handler` - Function to handle messages

**Returns:**

- Unsubscribe function

**Example:**

```typescript
const unsubscribe = client.onMessage((message) => {
  console.log("Message:", message);
});

// Later...
unsubscribe();
```

### isConnected()

Checks if the client is connected.

```typescript
isConnected(): boolean
```

**Returns:**

- `true` if connected, `false` otherwise

**Example:**

```typescript
if (client.isConnected()) {
  console.log("Client is connected");
}
```

### isInitialized()

Checks if the client is initialized.

```typescript
isInitialized(): boolean
```

**Returns:**

- `true` if initialized, `false` otherwise

**Example:**

```typescript
if (client.isInitialized()) {
  console.log("Client is initialized");
}
```

### getAuthState()

Gets authentication state for a specific provider.

```typescript
getAuthState(provider: string): { authenticated: boolean; lastError?: AuthenticationError } | undefined
```

**Parameters:**

- `provider` - Provider identifier (e.g., 'github', 'gmail')

**Returns:**

- Authentication state object or `undefined` if provider not found

**Example:**

```typescript
const authState = client.getAuthState("github");
if (authState) {
  console.log("Authenticated:", authState.authenticated);
  if (authState.lastError) {
    console.log("Last error:", authState.lastError.message);
  }
}
```

### isProviderAuthenticated()

Checks if a specific provider is authenticated.

```typescript
isProviderAuthenticated(provider: string): boolean
```

**Parameters:**

- `provider` - Provider identifier

**Returns:**

- `true` if authenticated, `false` otherwise

**Example:**

```typescript
if (client.isProviderAuthenticated("github")) {
  console.log("GitHub is authenticated");
}
```

### reauthenticate()

Manually triggers re-authentication for a provider.

```typescript
async reauthenticate(provider: string): Promise<boolean>
```

**Parameters:**

- `provider` - Provider identifier

**Returns:**

- `true` if re-authentication succeeded, `false` otherwise

**Throws:**

- Error if provider not found or no re-auth handler configured

**Example:**

```typescript
try {
  const success = await client.reauthenticate("github");
  if (success) {
    console.log("Re-authentication successful");
  }
} catch (error) {
  console.error("Re-authentication failed:", error);
}
```

## Type Definitions

### MCPTool

<AutoTypeTable path="../src/protocol/messages.ts" name="MCPTool" />

### MCPToolCallResponse

<AutoTypeTable path="../src/protocol/messages.ts" name="MCPToolCallResponse" />

### MCPToolCallParams

<AutoTypeTable path="../src/protocol/messages.ts" name="MCPToolCallParams" />

### OAuthConfig

<AutoTypeTable path="../src/integrations/types.ts" name="OAuthConfig" />

### MCPIntegration

<AutoTypeTable path="../src/integrations/types.ts" name="MCPIntegration" />

### ReauthContext

<AutoTypeTable path="../src/config/types.ts" name="ReauthContext" />

## OAuth Types

### PopupOptions

<AutoTypeTable path="../src/oauth/types.ts" name="PopupOptions" />

### OAuthFlowConfig

<AutoTypeTable path="../src/oauth/types.ts" name="OAuthFlowConfig" />

### AuthStatus

<AutoTypeTable path="../src/oauth/types.ts" name="AuthStatus" />

### ProviderTokenData

<AutoTypeTable path="../src/oauth/types.ts" name="ProviderTokenData" />

### OAuthCallbackParams

<AutoTypeTable path="../src/oauth/types.ts" name="OAuthCallbackParams" />

### OAuth Event Types

#### AuthStartedEvent

<AutoTypeTable path="../src/oauth/types.ts" name="AuthStartedEvent" />

#### AuthCompleteEvent

<AutoTypeTable path="../src/oauth/types.ts" name="AuthCompleteEvent" />

#### AuthErrorEvent

<AutoTypeTable path="../src/oauth/types.ts" name="AuthErrorEvent" />

#### AuthLogoutEvent

<AutoTypeTable path="../src/oauth/types.ts" name="AuthLogoutEvent" />

#### AuthDisconnectEvent

<AutoTypeTable path="../src/oauth/types.ts" name="AuthDisconnectEvent" />

## Built-in Integrations

### githubIntegration()

Creates a GitHub integration.

```typescript
function githubIntegration(config: GitHubIntegrationConfig): MCPIntegration;
```

<AutoTypeTable
  path="../src/integrations/github.ts"
  name="GitHubIntegrationConfig"
/>

### gmailIntegration()

Creates a Gmail integration.

```typescript
function gmailIntegration(config: GmailIntegrationConfig): MCPIntegration;
```

<AutoTypeTable
  path="../src/integrations/gmail.ts"
  name="GmailIntegrationConfig"
/>

### genericOAuthIntegration()

Creates a generic OAuth integration.

```typescript
function genericOAuthIntegration(
  config: GenericOAuthIntegrationConfig
): MCPIntegration;
```

<AutoTypeTable
  path="../src/integrations/generic.ts"
  name="GenericOAuthIntegrationConfig"
/>

### createSimpleIntegration()

Creates a simple integration without OAuth.

```typescript
function createSimpleIntegration(config: {
  id: string;
  tools: string[];
  onInit?: (client: any) => Promise<void> | void;
  onAfterConnect?: (client: any) => Promise<void> | void;
  onDisconnect?: (client: any) => Promise<void> | void;
}): MCPIntegration;
```

**Parameters:**

- `id` - Integration identifier
- `tools` - Array of tool names to enable
- `onInit` - Optional initialization hook
- `onAfterConnect` - Optional post-connection hook
- `onDisconnect` - Optional disconnect hook

## Vercel AI SDK Integration

### VercelAITool

Tool definition compatible with Vercel AI SDK v5:

<AutoTypeTable path="../src/ai/vercel-ai.ts" name="VercelAITool" />

### VercelAIToolsOptions

Options for converting MCP tools to Vercel AI SDK format:

<AutoTypeTable path="../src/ai/vercel-ai.ts" name="VercelAIToolsOptions" />

### getVercelAITools()

Converts all enabled MCP tools to Vercel AI SDK format.

```typescript
function getVercelAITools(
  client: MCPClient,
  options?: VercelAIToolsOptions
): Record<string, CoreTool>;
```

**Parameters:**

- `client` - Connected MCP client
- `options` - Optional configuration (see VercelAIToolsOptions above)

**Returns:**

- Object mapping tool names to Vercel AI SDK tools

**Example:**

```typescript
// Client-side
const tools = await getVercelAITools(mcpClient);

// Server-side with provider tokens
const tools = await getVercelAITools(serverClient, {
  providerTokens: { github: "ghp_...", gmail: "ya29..." },
});

const result = await generateText({
  model: openai("gpt-4"),
  prompt: "Create a GitHub issue",
  tools,
});
```

### convertMCPToolsToVercelAI()

Alternative name for `getVercelAITools()`.

```typescript
function convertMCPToolsToVercelAI(client: MCPClient): Record<string, CoreTool>;
```

### convertMCPToolToVercelAI()

Converts a single MCP tool to Vercel AI SDK format.

```typescript
function convertMCPToolToVercelAI(tool: MCPTool, client: MCPClient): CoreTool;
```

**Parameters:**

- `tool` - MCP tool definition
- `client` - MCP client for execution

**Returns:**

- Tool in Vercel AI SDK format

**Example:**

```typescript
const tool = client.getTool("github_create_issue");
if (tool) {
  const vercelTool = convertMCPToolToVercelAI(tool, client);
}
```

## Constants

### Server URL

```typescript
const MCP_SERVER_URL = "https://mcp.integrate.dev/api/v1/mcp";
```

### Default Timeout

```typescript
const DEFAULT_TIMEOUT = 30000; // 30 seconds
```

## Error Types

The SDK provides specific error classes for different failure scenarios.

### IntegrateSDKError

Base error class for all SDK errors.

```typescript
class IntegrateSDKError extends Error {
  name: "IntegrateSDKError";
}
```

### AuthenticationError

Error thrown when authentication fails or tokens are invalid.

```typescript
class AuthenticationError extends IntegrateSDKError {
  name: "AuthenticationError";
  statusCode?: number; // HTTP status code (usually 401)
  provider?: string; // OAuth provider name
}
```

**Example:**

```typescript
import { isAuthError, AuthenticationError } from "integrate-sdk";

try {
  await client.github.createIssue({
    owner: "user",
    repo: "repo",
    title: "Bug",
  });
} catch (error) {
  if (isAuthError(error)) {
    console.error(`Auth failed for ${error.provider}: ${error.message}`);
  }
}
```

### TokenExpiredError

Error thrown when OAuth tokens have expired.

```typescript
class TokenExpiredError extends AuthenticationError {
  name: "TokenExpiredError";
  provider?: string; // OAuth provider name
}
```

**Example:**

```typescript
import { isTokenExpiredError } from "integrate-sdk";

try {
  await client.github.createIssue({
    owner: "user",
    repo: "repo",
    title: "Bug",
  });
} catch (error) {
  if (isTokenExpiredError(error)) {
    console.error(`Token expired for ${error.provider}`);
    // Trigger re-authentication
  }
}
```

### AuthorizationError

Error thrown when access is forbidden due to insufficient permissions.

```typescript
class AuthorizationError extends IntegrateSDKError {
  name: "AuthorizationError";
  statusCode?: number; // HTTP status code (usually 403)
  requiredScopes?: string[]; // Missing OAuth scopes
}
```

**Example:**

```typescript
import { isAuthorizationError } from "integrate-sdk";

try {
  await client.github.createIssue({
    owner: "user",
    repo: "repo",
    title: "Bug",
  });
} catch (error) {
  if (isAuthorizationError(error)) {
    console.error("Insufficient permissions");
    if (error.requiredScopes) {
      console.error("Required scopes:", error.requiredScopes);
    }
  }
}
```

### ConnectionError

Error thrown when a connection to the server fails.

```typescript
class ConnectionError extends IntegrateSDKError {
  name: "ConnectionError";
  statusCode?: number; // HTTP status code
}
```

### ToolCallError

Error thrown when a tool call fails.

```typescript
class ToolCallError extends IntegrateSDKError {
  name: "ToolCallError";
  toolName: string; // Name of the tool that failed
  originalError?: unknown; // Original error from server
}
```

### Error Helper Functions

Type guard functions for error handling:

```typescript
// Check if error is any authentication error
function isAuthError(error: unknown): error is AuthenticationError;

// Check if error is specifically a token expired error
function isTokenExpiredError(error: unknown): error is TokenExpiredError;

// Check if error is an authorization error
function isAuthorizationError(error: unknown): error is AuthorizationError;
```

**Example:**

```typescript
import {
  isAuthError,
  isTokenExpiredError,
  isAuthorizationError,
} from "integrate-sdk";

try {
  await client.github.createIssue({
    owner: "user",
    repo: "repo",
    title: "Bug",
  });
} catch (error) {
  if (isTokenExpiredError(error)) {
    // Handle token expiration
  } else if (isAuthError(error)) {
    // Handle other auth errors
  } else if (isAuthorizationError(error)) {
    // Handle permission errors
  } else {
    // Handle other errors
  }
}
```

### parseServerError()

Utility function to parse server errors into appropriate error types.

```typescript
function parseServerError(
  error: any,
  context?: { toolName?: string; provider?: string }
): IntegrateSDKError;
```

This function is used internally by the SDK but can be useful for custom error handling.

## Next Steps

- Explore [Advanced Usage](/docs/guides/advanced-usage) for patterns and techniques
- Check [Architecture](/docs/reference/architecture) to understand the internals
- See example code in the repository
