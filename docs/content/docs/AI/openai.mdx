---
title: OpenAI Integration
description: Use MCP tools with OpenAI's Responses API
---

The Integrate SDK provides seamless integration with OpenAI's Responses API, allowing AI models to access your integrations through MCP tools. Use it on the frontend with `useIntegrateAI` or on the server with `getOpenAITools`.

## Installation

```bash
bun add integrate-sdk openai
```

## Frontend Integration

The easiest way is using the `useIntegrateAI` hook, which automatically injects provider tokens:

```typescript
// app/providers.tsx
'use client';

import { createMCPClient, githubPlugin } from 'integrate-sdk';
import { useIntegrateAI } from 'integrate-sdk/react';

const client = createMCPClient({
  plugins: [
    githubPlugin({ clientId: process.env.NEXT_PUBLIC_GITHUB_CLIENT_ID! }),
  ],
});

export function Providers({ children }: { children: React.ReactNode }) {
  useIntegrateAI(client);
  return <>{children}</>;
}
```

## Server-Side Integration

### Setup Server Configuration

```typescript
// lib/integrate-server.ts
import { createMCPServer, githubPlugin } from 'integrate-sdk/server';

export const { client: serverClient } = createMCPServer({
  plugins: [
    githubPlugin({
      clientId: process.env.GITHUB_CLIENT_ID!,
      clientSecret: process.env.GITHUB_CLIENT_SECRET!,
      scopes: ['repo', 'user'],
    }),
  ],
});
```

### Create Chat API Route

```typescript
// app/api/chat/route.ts
import { serverClient } from '@/lib/integrate-server';
import { getOpenAITools, executeOpenAIToolCall } from 'integrate-sdk/integrations/openai';
import OpenAI from 'openai';

const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });

export async function POST(req: Request) {
  try {
    // Extract provider tokens from request
    const tokensHeader = req.headers.get('x-integrate-tokens');
    const providerTokens = JSON.parse(tokensHeader || '{}');

    // Get tools with user's tokens
    const tools = await getOpenAITools(serverClient, { 
      providerTokens,
      strict: true // Optional: enable strict mode
    });

    const { messages } = await req.json();

    // Create response with tools
    const response = await openai.responses.create({
      model: 'gpt-4o-2024-11-20',
      input: messages,
      tools,
    });

    // Handle tool calls
    const toolCalls = response.output.filter(o => o.type === 'function_call');
    
    if (toolCalls.length > 0) {
      const toolResults = [];
      
      for (const toolCall of toolCalls) {
        const result = await executeOpenAIToolCall(
          serverClient,
          {
            id: toolCall.id,
            name: toolCall.name,
            arguments: toolCall.arguments,
          },
          { providerTokens }
        );
        
        toolResults.push({
          call_id: toolCall.call_id,
          type: 'function_call_output',
          output: result,
          status: 'completed',
        });
      }
      
      // Continue conversation with tool results
      const finalResponse = await openai.responses.create({
        model: 'gpt-4o-2024-11-20',
        input: [...messages, ...toolResults],
        tools,
      });
      
      return Response.json(finalResponse);
    }

    return Response.json(response);
  } catch (error: any) {
    return Response.json(
      { error: error.message },
      { status: 500 }
    );
  }
}
```

## Complete Example

### Frontend Component

```typescript
// app/chat/page.tsx
'use client';

import { useChat } from 'ai/react';
import { useState, useEffect } from 'react';
import { createMCPClient, githubPlugin } from 'integrate-sdk';

const client = createMCPClient({
  plugins: [
    githubPlugin({ clientId: process.env.NEXT_PUBLIC_GITHUB_CLIENT_ID! }),
  ],
});

export default function ChatPage() {
  const [authorized, setAuthorized] = useState(false);
  
  useEffect(() => {
    client.isAuthorized('github').then(setAuthorized);
  }, []);
  
  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: '/api/chat',
  });
  
  if (!authorized) {
    return (
      <div>
        <h1>Connect GitHub</h1>
        <button onClick={() => client.authorize('github').then(() => setAuthorized(true))}>
          Connect GitHub
        </button>
      </div>
    );
  }
  
  return (
    <div>
      <h1>AI Chat with GitHub Access</h1>
      <div>
        {messages.map((m) => (
          <div key={m.id}>
            <strong>{m.role === 'user' ? 'You' : 'AI'}:</strong> {m.content}
          </div>
        ))}
      </div>
      <form onSubmit={handleSubmit}>
        <input 
          value={input} 
          onChange={handleInputChange}
          placeholder="Ask AI to use GitHub..."
          disabled={isLoading}
        />
        <button type="submit" disabled={isLoading}>
          {isLoading ? 'Thinking...' : 'Send'}
        </button>
      </form>
    </div>
  );
}
```

## API Reference

### `getOpenAITools(client, options?)`

Converts all enabled MCP tools to OpenAI Responses API format.

**Parameters:**
- `client` - The MCP client instance
- `options` - Optional configuration
  - `providerTokens` - Provider tokens for server-side usage
  - `strict` - Whether to use strict mode (default: false)

**Returns:** `Promise<OpenAITool[]>` - Array of tools ready for OpenAI Responses API

### `executeOpenAIToolCall(client, toolCall, options?)`

Execute a single tool call from OpenAI's response.

**Parameters:**
- `client` - The MCP client instance
- `toolCall` - Tool call object with `id`, `name`, and `arguments`
- `options` - Optional configuration with `providerTokens`

**Returns:** `Promise<string>` - Tool execution result as JSON string

## Tool Format

OpenAI Responses API expects tools in this format:

```typescript
{
  type: 'function',
  name: 'github_create_issue',
  description: 'Create a new issue in a GitHub repository',
  parameters: {
    type: 'object',
    properties: {
      owner: { type: 'string' },
      repo: { type: 'string' },
      title: { type: 'string' },
      body: { type: 'string' }
    },
    required: ['owner', 'repo', 'title']
  },
  strict: false
}
```

## Security Best Practices

1. **OAuth Secrets**: Never expose `clientSecret` to the client
2. **Token Validation**: Validate tokens on every server request
3. **HTTPS Only**: Always use HTTPS for token transmission
4. **Rate Limiting**: Implement per-user rate limits

## Next Steps

- [Set up OAuth routes in Next.js](/docs/oauth/nextjs)
- [Explore other AI providers](/docs/integrations/vercel-ai)
- [API Reference](/docs/reference/options)

